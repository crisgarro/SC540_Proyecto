@page "/users"
@using Backend.Models
@using Backend.Services
@using Backend.Settings
@using Microsoft.Extensions.Options

<MudContainer>
    <MudPaper Elevation="4">
        <!--MudTextField Label="Username" @bind-Value="username" /-->
        <MudButton Color="Color.Primary" OnClick="GetAllUser">Get User</MudButton>
    </MudPaper>

    @if (_users != null)
    {
        <MudCard>
            <MudCardContent>
                <MudTypography Typo="Typo.h5">User Details</MudTypography>
                <MudText>Username: @_users.Username</MudText>
                <MudText>Name: @_users.FirstName</MudText>
                <MudText>Email: @_users.Email</MudText>
            </MudCardContent>
        </MudCard>
    }
</MudContainer>

@code {
    [Inject]
    private IOptions<OracleConnectionSettings> ConnectionSettings { get; set; }

    private UserModel? _users;
    private UserService _service;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        
        if (_service == null)
        {
            _service = new UserService(ConnectionSettings);
        }
    }

    private async Task GetAllUser()
    {
    // Replace this with your code to retrieve user information by username
        _users = await _service.GetUser();
    }

}

